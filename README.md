# Building 'eShop' from Zero to Hero: We add the ChatBot

## 1. We include the ShowChatbotButton razor component in the Mainlayout

We have to include the **ShowChatbotButton.razor** component in the **Mainlayout.razor** component

![image](https://github.com/user-attachments/assets/5cdbe554-b14e-45e6-855d-2d4abf08135f)

This code snippet is a Blazor component that demonstrates how to use query parameters in a web application to conditionally render a chatbot interface

**How It Works**

**By default**, the chatbot ```<Chatbot />``` is **not displayed** because **ShowChat** is **false**

**Clicking the link updates** the URL to include **chat=true**

Blazor detects the **URL change**, updates the **ShowChat** property to **true**, and re-renders the component to display the chatbot

This approach is useful for enabling specific features based on query parameters without requiring a full page reload

We review the **ShowChatbotButton.razor** source code:

```razor
@inject NavigationManager Nav

<a class="show-chatbot" href="@Nav.GetUriWithQueryParameter("chat", true)" title="Show chatbot"></a>

@if (ShowChat)
{
    <Chatbot />
}

@code {
    [SupplyParameterFromQuery(Name = "chat")]
    public bool ShowChat { get; set; }
}
```

**Code Explanation**

**Dependency Injection**:

```csharp
@inject NavigationManager Nav
```

The **NavigationManager** service is injected into the component

This service is used to **manage navigation and URLs** in Blazor applications

**Hyperlink to Enable the Chatbot**:

```html
<a class="show-chatbot" href="@Nav.GetUriWithQueryParameter("chat", true)" title="Show chatbot"></a>
```

A link is created with the href attribute set to a URL generated by NavigationManager.GetUriWithQueryParameter("chat", true)

This method appends the query parameter chat=true to the current URL

Clicking this link updates the URL to include the chat query parameter

**Conditional Rendering of the Chatbot**:

```html
@if (ShowChat)
{
    <Chatbot />
}
````

If the ShowChat property is true, the <Chatbot /> component is rendered

This conditional rendering is tied to the value of ShowChat

**Query Parameter Handling**:

```csharp
@code {
    [SupplyParameterFromQuery(Name = "chat")]
    public bool ShowChat { get; set; }
}
```

The [SupplyParameterFromQuery(Name = "chat")] attribute maps the query parameter chat from the URL to the ShowChat property

When the URL contains chat=true, the ShowChat property is automatically set to true

If chat is not present or is false, the property is false


## 2. Load Nuget packages for AI in WebApp project

We have to load the Microsoft.Extensions.AI Nuget packages

Both packages aim to streamline the development of **AI-integrated applications** using the .NET ecosystem

![image](https://github.com/user-attachments/assets/cda2e1e2-c79e-4ca3-9fe3-9dac0cd2e44b)

**Microsoft.Extensions.AI**:

**Purpose**:

This package provides foundational support for integrating AI-based services and applications in .NET projects

It is part of the Microsoft.Extensions family, designed to integrate seamlessly with ASP.NET Core and other .NET applications

**Features**:

Abstractions and utilities for working with AI models or services

Dependency injection (DI) support to easily configure AI services in .NET projects

Simplifies the integration of AI functionalities into your application using standardized patterns

**Use Case**: If you are building an application that uses AI models (from any provider, potentially), this package helps establish the infrastructure to work with AI services efficiently

**Microsoft.Extensions.AI.OpenAI**:

**Purpose**: This package builds on Microsoft.Extensions.AI and provides specific integrations for OpenAI's APIs, making it easier to interact with OpenAI services like ChatGPT, Codex, or DALL-E directly within a .NET application

**Features**:

OpenAI-specific utilities and configuration options

Simplifies making requests to OpenAI APIs (e.g., for text generation, image creation)

Ensures compatibility with OpenAI's service models while leveraging .NET's dependency injection and configuration capabilities

**Use Case**: Use this package when you need to integrate OpenAIâ€™s capabilities into your .NET application, whether for chat, content generation, or other AI-driven functiona

## 3. We modify the ChatState.cs file

## 4. We modify the Chatbot.razor component

## 5. We configure the eShop.AppHost middleware


## 6. We configure the AI connection string in the appsettings.json

## 7. 
